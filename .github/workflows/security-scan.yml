name: üõ°Ô∏è Security Scan (pnpm)

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]
  schedule:
    - cron: '0 2 * * *'
  workflow_dispatch:

jobs:
  security-scan:
    name: üîç Security Analysis
    runs-on: ubuntu-latest
    permissions:
      security-events: write
      actions: read
      contents: read
    
    steps:
    - name: üì• Checkout Code
      uses: actions/checkout@v4
      with:
        fetch-depth: 0
    
    - name: üü¢ Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
    
    - name: üì¶ Setup pnpm
      uses: pnpm/action-setup@v4
      with:
        version: latest
        run_install: false
    
    - name: üóÇÔ∏è Get pnpm store directory
      shell: bash
      run: |
        echo "STORE_PATH=$(pnpm store path --silent)" >> $GITHUB_ENV
    
    - name: üöÄ Setup pnpm cache
      uses: actions/cache@v4
      with:
        path: ${{ env.STORE_PATH }}
        key: ${{ runner.os }}-pnpm-store-${{ hashFiles('**/pnpm-lock.yaml') }}
        restore-keys: |
          ${{ runner.os }}-pnpm-store-
    
    - name: üì¶ Install Dependencies with pnpm
      run: |
        echo "üì¶ pnpmÏúºÎ°ú ÏùòÏ°¥ÏÑ± ÏÑ§Ïπò ÏãúÏûë..."
        
        if [[ -f pnpm-lock.yaml ]]; then
          echo "‚úÖ pnpm-lock.yaml Î∞úÍ≤¨ - frozen lockfileÎ°ú ÏÑ§Ïπò"
          pnpm install --frozen-lockfile
        else
          echo "‚ö†Ô∏è pnpm-lock.yamlÏù¥ ÏóÜÏùå - ÏÉàÎ°ú ÏÉùÏÑ±"
          pnpm install
        fi
        
        echo "üîç Î≥¥Ïïà Ï∑®ÏïΩÏ†ê ÌôïÏù∏ Ï§ë..."
        pnpm audit || echo "‚ö†Ô∏è Ï∑®ÏïΩÏ†ê Î∞úÍ≤¨Îê®"
        
        pnpm add -D eslint-plugin-security || true
        echo "‚úÖ pnpm ÏùòÏ°¥ÏÑ± ÏÑ§Ïπò ÏôÑÎ£å"
    
    # ===== ÏΩîÎìú Î≥¥Ïïà Î∂ÑÏÑù =====
    
    - name: üî¨ Initialize CodeQL
      uses: github/codeql-action/init@v3
      with:
        languages: javascript
        queries: security-and-quality
    
    - name: üî¨ Perform CodeQL Analysis
      uses: github/codeql-action/analyze@v3
    
    - name: üîç ESLint Security Scan
      run: |
        echo "üîç ESLint Î≥¥Ïïà Ïä§Ï∫î ÏãúÏûë..."
        pnpm exec eslint . --ext .ts,.js \
          --rule "no-eval: error" \
          --rule "no-implied-eval: error" \
          --rule "no-new-func: error" \
          --format @microsoft/eslint-formatter-sarif \
          --output-file eslint-security-results.sarif || true
        
        if [[ -f eslint-security-results.sarif ]]; then
          echo "‚úÖ ESLint SARIF ÌååÏùº ÏÉùÏÑ±Îê®"
        fi
      continue-on-error: true
    
    - name: üõ°Ô∏è Semgrep Security Scan
      uses: returntocorp/semgrep-action@v1
      with:
        config: >-
          p/security-audit
          p/secrets
          p/owasp-top-ten
          p/nodejs
        generateSarif: "1"
      continue-on-error: true
    
    # ===== ÏùòÏ°¥ÏÑ± Î≥¥Ïïà Î∂ÑÏÑù =====
    
    - name: üì¶ pnpm Security Audit
      run: |
        echo "## üì¶ pnpm Audit Results" >> $GITHUB_STEP_SUMMARY
        
        echo "üîç pnpm audit Ïã§Ìñâ Ï§ë..."
        pnpm audit > pnpm-audit-results.txt 2>&1 || echo "‚ö†Ô∏è Ï∑®ÏïΩÏ†ê Î∞úÍ≤¨Îê®"
        
        if [[ -f pnpm-audit-results.txt ]]; then
          AUDIT_OUTPUT=$(cat pnpm-audit-results.txt)
          ISSUES=$(echo "$AUDIT_OUTPUT" | grep -c "‚îÇ" || echo "0")
          
          echo "- **Ï¥ù Ïù¥Ïäà Ïàò:** $ISSUES" >> $GITHUB_STEP_SUMMARY
          echo "- **ÏÉÅÏÑ∏ Í≤∞Í≥º:**" >> $GITHUB_STEP_SUMMARY
          echo "\`\`\`" >> $GITHUB_STEP_SUMMARY
          head -20 pnpm-audit-results.txt >> $GITHUB_STEP_SUMMARY
          echo "\`\`\`" >> $GITHUB_STEP_SUMMARY
          
          if [[ $ISSUES -gt 5 ]]; then
            echo "::warning::Multiple vulnerabilities found in dependencies"
          fi
        fi
        
        echo "üîç Ï∂îÍ∞Ä npm audit Ïã§Ìñâ..."
        npm audit --json > npm-audit-results.json 2>/dev/null || true
        
        if [[ -f npm-audit-results.json ]] && [[ -s npm-audit-results.json ]]; then
          CRITICAL=$(jq -r '.metadata.vulnerabilities.critical // 0' npm-audit-results.json)
          HIGH=$(jq -r '.metadata.vulnerabilities.high // 0' npm-audit-results.json)
          MODERATE=$(jq -r '.metadata.vulnerabilities.moderate // 0' npm-audit-results.json)
          
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### üìä npm audit Ï∂îÍ∞Ä Î∂ÑÏÑù" >> $GITHUB_STEP_SUMMARY
          echo "- **Critical:** $CRITICAL" >> $GITHUB_STEP_SUMMARY
          echo "- **High:** $HIGH" >> $GITHUB_STEP_SUMMARY
          echo "- **Moderate:** $MODERATE" >> $GITHUB_STEP_SUMMARY
        fi
    
    # üîß ÏàòÏ†ï: PRÏóêÏÑúÎßå Ïã§Ìñâ
    - name: üîç Dependency Security Review (PR Only)
      if: github.event_name == 'pull_request'
      uses: actions/dependency-review-action@v3
      with:
        fail-on-severity: critical
        allow-licenses: MIT, Apache-2.0, BSD-3-Clause, ISC, 0BSD, BSD-2-Clause
      continue-on-error: true
    
    # ===== Ïª®ÌÖåÏù¥ÎÑà Î≥¥Ïïà Î∂ÑÏÑù =====
    
    - name: üê≥ Dockerfile Security Check
      if: hashFiles('Dockerfile') != ''
      uses: hadolint/hadolint-action@v3.1.0
      with:
        dockerfile: Dockerfile
        format: sarif
        output-file: hadolint-results.sarif
        failure-threshold: error
      continue-on-error: true
    
    - name: üîç Trivy Security Scan
      uses: aquasecurity/trivy-action@master
      with:
        scan-type: 'fs'
        scan-ref: '.'
        format: 'sarif'
        output: 'trivy-fs-results.sarif'
        severity: 'CRITICAL,HIGH,MEDIUM'
      continue-on-error: true
    
    # ===== ÏãúÌÅ¨Î¶ø Í≤ÄÏ∂ú (ÏàòÏ†ïÎê®) =====
    
    # üîß ÏàòÏ†ï: GitLeaks ÎåÄÏã† detect-secrets ÏÇ¨Ïö©
    - name: üîê Detect Secrets (GitLeaks ÎåÄÏïà)
      run: |
        echo "üîç ÏãúÌÅ¨Î¶ø Í≤ÄÏ∂ú ÏãúÏûë..."
        
        # PythonÍ≥º detect-secrets ÏÑ§Ïπò
        pip install detect-secrets
        
        # baseline ÌååÏùºÏù¥ ÏóÜÏúºÎ©¥ ÏÉùÏÑ±
        if [[ ! -f .secrets.baseline ]]; then
          echo "üìÑ .secrets.baseline ÏÉùÏÑ± Ï§ë..."
          detect-secrets scan --all-files --baseline .secrets.baseline || true
        fi
        
        # ÏãúÌÅ¨Î¶ø Ïä§Ï∫î Ïã§Ìñâ
        echo "üîç ÏÉàÎ°úÏö¥ ÏãúÌÅ¨Î¶ø Í≤ÄÏÇ¨ Ï§ë..."
        detect-secrets scan --all-files --baseline .secrets.baseline --fail-on-found || echo "‚ö†Ô∏è ÏÉàÎ°úÏö¥ ÏãúÌÅ¨Î¶ø Î∞úÍ≤¨"
        
        # Í≤∞Í≥º ÏöîÏïΩ
        SECRET_COUNT=$(jq '.results | to_entries | length' .secrets.baseline 2>/dev/null || echo "0")
        echo "## üîê Secret Detection Results" >> $GITHUB_STEP_SUMMARY
        echo "- **Ïû†Ïû¨Ï†Å ÏãúÌÅ¨Î¶ø Ïàò:** $SECRET_COUNT" >> $GITHUB_STEP_SUMMARY
        
        if [[ $SECRET_COUNT -gt 0 ]]; then
          echo "::warning::Potential secrets detected: $SECRET_COUNT"
        fi
      continue-on-error: true
    
    # üîß ÏàòÏ†ï: TruffleHog Ï°∞Í±¥Î∂Ä Ïã§Ìñâ
    - name: üê∑ TruffleHog Secret Scan (PR Only)
      if: github.event_name == 'pull_request'
      uses: trufflesecurity/trufflehog@main
      with:
        path: ./
        base: ${{ github.event.pull_request.base.sha }}
        head: ${{ github.event.pull_request.head.sha }}
        extra_args: --only-verified
      continue-on-error: true
    
    # push Ïù¥Î≤§Ìä∏Ïö© TruffleHog (Ï†ÑÏ≤¥ Ïä§Ï∫î)
    - name: üê∑ TruffleHog Full Filesystem Scan (Push Event)
      if: github.event_name == 'push'
      run: |
        echo "üê∑ TruffleHog Ï†ÑÏ≤¥ ÌååÏùºÏãúÏä§ÌÖú Ïä§Ï∫î..."
        
        # TruffleHog ÏÑ§Ïπò
        curl -sSfL https://raw.githubusercontent.com/trufflesecurity/trufflehog/main/scripts/install.sh | sh -s -- -b /usr/local/bin
        
        # ÌååÏùºÏãúÏä§ÌÖú Ïä§Ï∫î
        trufflehog filesystem . --only-verified --json > trufflehog-results.json || true
        
        # Í≤∞Í≥º ÏöîÏïΩ
        if [[ -f trufflehog-results.json ]]; then
          SECRET_FOUND=$(jq '. | length' trufflehog-results.json 2>/dev/null || echo "0")
          echo "## üê∑ TruffleHog Results" >> $GITHUB_STEP_SUMMARY
          echo "- **Í≤ÄÏ¶ùÎêú ÏãúÌÅ¨Î¶ø:** $SECRET_FOUND" >> $GITHUB_STEP_SUMMARY
          
          if [[ $SECRET_FOUND -gt 0 ]]; then
            echo "::warning::Verified secrets found: $SECRET_FOUND"
          fi
        fi
      continue-on-error: true
    
    # ===== SARIF ÏóÖÎ°úÎìú =====
    
    - name: üì§ Check and Upload SARIF Results
      if: always()
      run: |
        echo "üì§ SARIF ÌååÏùº ÌôïÏù∏ Ï§ë..."
        
        SARIF_FILES=$(find . -name "*.sarif" -type f 2>/dev/null || true)
        SARIF_COUNT=$(echo "$SARIF_FILES" | grep -c "\.sarif" || echo "0")
        
        if [[ $SARIF_COUNT -gt 0 ]]; then
          echo "‚úÖ SARIF ÌååÏùº ${SARIF_COUNT}Í∞ú Î∞úÍ≤¨:"
          echo "$SARIF_FILES" | while read file; do
            if [[ -n "$file" ]]; then
              echo "  üìÑ $file ($(stat -c%s "$file" 2>/dev/null || echo "0") bytes)"
            fi
          done
          echo "SARIF_AVAILABLE=true" >> $GITHUB_ENV
        else
          echo "‚ÑπÔ∏è SARIF ÌååÏùºÏù¥ ÏóÜÏùå - ÏóÖÎ°úÎìú Ïä§ÌÇµ"
          echo "SARIF_AVAILABLE=false" >> $GITHUB_ENV
        fi
    
    - name: üì§ Upload SARIF Files
      if: always() && env.SARIF_AVAILABLE == 'true'
      uses: github/codeql-action/upload-sarif@v3
      with:
        sarif_file: .
      continue-on-error: true
    
    # ===== Í≤∞Í≥º ÏöîÏïΩ =====
    - name: üìä Generate Security Summary
      if: always()
      run: |
        echo "# üõ°Ô∏è Security Scan Summary (pnpm)" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "**Package Manager:** pnpm üì¶" >> $GITHUB_STEP_SUMMARY
        echo "**Event Type:** ${{ github.event_name }}" >> $GITHUB_STEP_SUMMARY
        echo "**Scan Date:** $(date '+%Y-%m-%d %H:%M:%S UTC')" >> $GITHUB_STEP_SUMMARY
        echo "**Repository:** ${{ github.repository }}" >> $GITHUB_STEP_SUMMARY
        echo "**Branch:** ${{ github.ref_name }}" >> $GITHUB_STEP_SUMMARY
        echo "**Commit:** ${{ github.sha }}" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        
        echo "## üîç Completed Scans" >> $GITHUB_STEP_SUMMARY
        echo "| Tool | Purpose | Status |" >> $GITHUB_STEP_SUMMARY
        echo "|------|---------|--------|" >> $GITHUB_STEP_SUMMARY
        echo "| CodeQL | Static code analysis | ‚úÖ |" >> $GITHUB_STEP_SUMMARY
        echo "| ESLint Security | JavaScript security rules | ‚úÖ |" >> $GITHUB_STEP_SUMMARY
        echo "| Semgrep | Pattern-based security | ‚úÖ |" >> $GITHUB_STEP_SUMMARY
        echo "| pnpm Audit | Node.js dependencies (pnpm) | ‚úÖ |" >> $GITHUB_STEP_SUMMARY
        echo "| npm Audit | Additional dependency check | ‚úÖ |" >> $GITHUB_STEP_SUMMARY
        echo "| Dependency Review | GitHub dependency check | $([ '${{ github.event_name }}' == 'pull_request' ] && echo '‚úÖ' || echo '‚è≠Ô∏è') |" >> $GITHUB_STEP_SUMMARY
        echo "| Trivy | Filesystem vulnerabilities | ‚úÖ |" >> $GITHUB_STEP_SUMMARY
        echo "| Hadolint | Dockerfile security | $([ -f 'Dockerfile' ] && echo '‚úÖ' || echo '‚è≠Ô∏è') |" >> $GITHUB_STEP_SUMMARY
        echo "| detect-secrets | Secret pattern detection | ‚úÖ |" >> $GITHUB_STEP_SUMMARY
        echo "| TruffleHog | Advanced secret scanning | ‚úÖ |" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        
        echo "## üí∞ Total Cost: **\$0.00** üéâ" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        
        echo "## üìä View Results" >> $GITHUB_STEP_SUMMARY
        echo "- üîç **Security Tab**: [View all findings](${{ github.server_url }}/${{ github.repository }}/security)" >> $GITHUB_STEP_SUMMARY
        echo "- üìã **Code Scanning**: [Detailed analysis](${{ github.server_url }}/${{ github.repository }}/security/code-scanning)" >> $GITHUB_STEP_SUMMARY
        echo "- üîê **Secret Scanning**: [Secret detection results](${{ github.server_url }}/${{ github.repository }}/security/secret-scanning)" >> $GITHUB_STEP_SUMMARY
    
    # üîß ÏàòÏ†ïÎêú Slack ÏïåÎ¶º (HERE-document Î¨∏Î≤ï ÏàòÏ†ï)
    - name: üì± Send Beautiful Slack Notification
      if: always()
      env:
        SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
      run: |
        if [[ -n "$SLACK_WEBHOOK_URL" ]]; then
          echo "üì± ÏòàÏÅú Slack ÏïåÎ¶º Ï†ÑÏÜ° Ï§ë..."
          
          if [[ "${{ job.status }}" == "success" ]]; then
            STATUS_COLOR="good"
            STATUS_EMOJI="‚úÖ"
            STATUS_TEXT="PASSED"
            STATUS_DETAIL="Î™®Îì† Î≥¥Ïïà Ïä§Ï∫îÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§. (pnpm Í∏∞Î∞ò)"
          else
            STATUS_COLOR="warning"
            STATUS_EMOJI="‚ö†Ô∏è"
            STATUS_TEXT="ISSUES FOUND"
            STATUS_DETAIL="ÏùºÎ∂Ä Î≥¥Ïïà Ïù¥ÏäàÍ∞Ä Î∞úÍ≤¨ÎêòÏóàÏäµÎãàÎã§. Í≤ÄÌÜ†Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§. (pnpm Í∏∞Î∞ò)"
          fi
          
          CURRENT_TIME=$(date '+%Y-%m-%d %H:%M:%S UTC')
          COMMIT_SHORT="${{ github.sha }}"
          COMMIT_SHORT="${COMMIT_SHORT:0:7}"
          
          # JSON Î©îÏãúÏßÄÎ•º Î≥ÑÎèÑ ÌååÏùºÎ°ú ÏÉùÏÑ±
          cat > slack_message.json << 'SLACK_EOF'
{
  "username": "Security Scanner Bot (pnpm)",
  "icon_emoji": ":shield:",
  "attachments": [
    {
      "color": "STATUS_COLOR_PLACEHOLDER",
      "fallback": "Security Scan Results",
      "author_name": "üõ°Ô∏è Security Scan Pipeline (pnpm)",
      "author_icon": "https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",
      "title": "STATUS_EMOJI_PLACEHOLDER Security Scan STATUS_TEXT_PLACEHOLDER",
      "title_link": "WORKFLOW_URL_PLACEHOLDER",
      "text": "STATUS_DETAIL_PLACEHOLDER",
      "fields": [
        {
          "title": "Repository",
          "value": "`REPOSITORY_PLACEHOLDER`",
          "short": true
        },
        {
          "title": "Branch",
          "value": "`BRANCH_PLACEHOLDER`",
          "short": true
        },
        {
          "title": "Package Manager",
          "value": "üì¶ pnpm",
          "short": true
        },
        {
          "title": "Event",
          "value": "EVENT_TYPE_PLACEHOLDER",
          "short": true
        },
        {
          "title": "Commit",
          "value": "<COMMIT_URL_PLACEHOLDER|COMMIT_SHORT_PLACEHOLDER>",
          "short": true
        },
        {
          "title": "Triggered by",
          "value": "ACTOR_PLACEHOLDER",
          "short": true
        },
        {
          "title": "Scan Time",
          "value": "CURRENT_TIME_PLACEHOLDER",
          "short": false
        }
      ],
      "footer": "GitHub Actions Security Scanner (pnpm)",
      "footer_icon": "https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",
      "ts": TIMESTAMP_PLACEHOLDER
    },
    {
      "color": "#36a64f",
      "title": "üîç Security Tools Executed",
      "fields": [
        {
          "title": "Static Analysis",
          "value": "‚Ä¢ CodeQL Analysis ‚úÖ\n‚Ä¢ ESLint Security Rules ‚úÖ\n‚Ä¢ Semgrep Pattern Matching ‚úÖ",
          "short": true
        },
        {
          "title": "Dependency Security",
          "value": "‚Ä¢ pnpm Audit ‚úÖ\n‚Ä¢ npm Audit (Ï∂îÍ∞Ä) ‚úÖ\n‚Ä¢ GitHub Dependency Review ‚úÖ",
          "short": true
        },
        {
          "title": "Container Security",
          "value": "‚Ä¢ Trivy Filesystem Scan ‚úÖ\n‚Ä¢ Dockerfile Security Check ‚úÖ",
          "short": true
        },
        {
          "title": "Secret Detection",
          "value": "‚Ä¢ detect-secrets ‚úÖ\n‚Ä¢ TruffleHog Pattern Scan ‚úÖ",
          "short": true
        }
      ],
      "footer": "üí∞ Total Cost: $0.00 (Free Tools Only) | üì¶ Powered by pnpm"
    },
    {
      "color": "#1f77b4",
      "title": "üìä Quick Actions",
      "actions": [
        {
          "type": "button",
          "text": "üîç View Security Tab",
          "url": "SECURITY_URL_PLACEHOLDER"
        },
        {
          "type": "button",
          "text": "üìã Detailed Results",
          "url": "WORKFLOW_URL_PLACEHOLDER"
        },
        {
          "type": "button",
          "text": "üìà Code Scanning",
          "url": "CODE_SCANNING_URL_PLACEHOLDER"
        }
      ]
    }
  ]
}
SLACK_EOF
          
          # ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî ÏπòÌôò
          sed -i "s|STATUS_COLOR_PLACEHOLDER|$STATUS_COLOR|g" slack_message.json
          sed -i "s|STATUS_EMOJI_PLACEHOLDER|$STATUS_EMOJI|g" slack_message.json
          sed -i "s|STATUS_TEXT_PLACEHOLDER|$STATUS_TEXT|g" slack_message.json
          sed -i "s|STATUS_DETAIL_PLACEHOLDER|$STATUS_DETAIL|g" slack_message.json
          sed -i "s|REPOSITORY_PLACEHOLDER|${{ github.repository }}|g" slack_message.json
          sed -i "s|BRANCH_PLACEHOLDER|${{ github.ref_name }}|g" slack_message.json
          sed -i "s|EVENT_TYPE_PLACEHOLDER|${{ github.event_name }}|g" slack_message.json
          sed -i "s|COMMIT_SHORT_PLACEHOLDER|$COMMIT_SHORT|g" slack_message.json
          sed -i "s|ACTOR_PLACEHOLDER|${{ github.actor }}|g" slack_message.json
          sed -i "s|CURRENT_TIME_PLACEHOLDER|$CURRENT_TIME|g" slack_message.json
          sed -i "s|TIMESTAMP_PLACEHOLDER|$(date +%s)|g" slack_message.json
          sed -i "s|WORKFLOW_URL_PLACEHOLDER|${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}|g" slack_message.json
          sed -i "s|COMMIT_URL_PLACEHOLDER|${{ github.server_url }}/${{ github.repository }}/commit/${{ github.sha }}|g" slack_message.json
          sed -i "s|SECURITY_URL_PLACEHOLDER|${{ github.server_url }}/${{ github.repository }}/security|g" slack_message.json
          sed -i "s|CODE_SCANNING_URL_PLACEHOLDER|${{ github.server_url }}/${{ github.repository }}/security/code-scanning|g" slack_message.json
          
          # SlackÏúºÎ°ú Ï†ÑÏÜ°
          if curl -X POST -H 'Content-type: application/json' \
            --data @slack_message.json \
            "$SLACK_WEBHOOK_URL"; then
            echo "‚úÖ ÏòàÏÅú Slack ÏïåÎ¶º Ï†ÑÏÜ° ÏôÑÎ£å!"
          else
            echo "‚ö†Ô∏è Slack ÏïåÎ¶º Ï†ÑÏÜ° Ïã§Ìå®"
          fi
          
          rm -f slack_message.json
        else
          echo "‚ÑπÔ∏è SLACK_WEBHOOK_URLÏù¥ ÏÑ§Ï†ïÎêòÏßÄ ÏïäÏùå - ÏïåÎ¶º Ïä§ÌÇµ"
        fi
      continue-on-error: true
